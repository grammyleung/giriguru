@using Microsoft.AspNetCore.Builder
@using Microsoft.AspNetCore.Http.Features
@using Microsoft.AspNetCore.Localization
@using Microsoft.AspNetCore.Mvc.Localization
@using Microsoft.Extensions.Options
@using Microsoft.Extensions.Localization
@using GiriGuru.Web

@inject IViewLocalizer Localizer
@inject IStringLocalizer<SharedString> SharedStringLocalizer
@inject IOptions<RequestLocalizationOptions> LocOptions

@{
	var cultureFeature = Context.Features.Get<IRequestCultureFeature>();
	var cultureItems = LocOptions.Value.SupportedUICultures
		.Select(c => new SelectListItem { Value = c.Name, Text = c.NativeName })
		.ToList();
	var returnUrl = string.IsNullOrEmpty(Context.Request.Path) ? "~/" : $"~{Context.Request.Path.Value}";

	//var selectedLangauge = Context.Request.Cookies[CookieRequestCultureProvider.DefaultCookieName];
	string culture = cultureFeature.RequestCulture.Culture.ToString();
	string cssFileName = string.Format("AdminLTE-{0}.css", culture);
	ViewData["CssFileName"] = cssFileName;
}
<!DOCTYPE html>
<html>
<head>
	<meta charset="utf-8">
	<meta http-equiv="X-UA-Compatible" content="IE=edge">
	<title>@ViewData["Title"] | @SharedStringLocalizer["app-name-full"]</title>
	<!-- Tell the browser to be responsive to screen width -->
	<meta content="width=device-width, initial-scale=1, maximum-scale=1, user-scalable=no" name="viewport">
	@await Html.PartialAsync("_Partial_Head", this.ViewData)
	@RenderSection("page_head", false)
</head>
<body class="hold-transition login-page">
	<div class="login-box">
		<div class="login-logo">
			<a href="/Home/Dashboard"><b>GiRi</b><span style="font-size:80px">.</span>GuRu</a>
			@Localizer["html-logo-name"]
		</div>
		<!-- /.login-logo -->
		@RenderBody()

		<form id="selectLanguage" asp-controller="Home"
			  asp-action="SetLanguage" asp-route-returnUrl="@returnUrl"
			  method="post" role="form">
			<div class="form-group" style="margin-top:10px;">
				<label class="control-sidebar-subheading">
					@Localizer["label-choose-language"]
					<select name="culture" onchange="this.form.submit();" asp-for="@cultureFeature.RequestCulture.UICulture.Name" asp-items="cultureItems" class="pull-right text-black bg-gray"></select>
				</label>
			</div>
		</form>
	</div>
	<!-- /.login-box -->

	@await Html.PartialAsync("_Partial_Foot")
	@RenderSection("page_foot", false)
</body>
</html>
